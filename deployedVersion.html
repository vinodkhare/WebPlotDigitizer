<!DOCTYPE html>
<!-- 
	WebPlotDigitizer - http://arohatgi.info/WebPlotDigitizer

	Version 2.0

	Copyright 2010 Ankit Rohatgi <ankitrohatgi@hotmail.com>

	This file is part of HTML5 Plot Data Extracter.

    WebPlotDigitizer is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    WebPlotDigitizer is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with WebPlotDigitizer.  If not, see <http://www.gnu.org/licenses/>.

-->
<html>

<head>
<title>WebPlotDigitizer - Copyright 2010 Ankit Rohatgi</title>
<link rel="stylesheet" href="styles.css" type="text/css" media="screen" />
<!-- These have been combined in the deployment mode.
<script src="javascript/main.js" language="JavaScript"></script>
<script src="javascript/canvasDrawing.js" language="JavaScript"></script>
<script src="javascript/mouseEvents.js" language="JavaScript"></script>
<script src="javascript/zoom.js" language="JavaScript"></script>
<script src="javascript/toolbars.js" language="JavaScript"></script>
<script src="javascript/sidebars.js" language="JavaScript"></script>
<script src="javascript/popups.js" language="JavaScript"></script>
<script src="javascript/imageEditing.js" language="JavaScript"></script>
<script src="javascript/mathFunctions.js" language="JavaScript"></script>
<script src="javascript/alignAxes.js" language="JavaScript"></script>
<script src="javascript/manualDataCollection.js" language="JavaScript"></script>
<script src="javascript/autodetect.js" language="JavaScript"></script>
<script src="javascript/imageProcessing.js" language="JavaScript"></script>
<script src="javascript/csvgenerator.js" language="JavaScript"></script>
-->

<!-- this does not work with the supplied HTTP server with this code -->
<script src="javascript/deployment.js" language="JavaScript"></script>

</head>

<body onLoad="javascript:init();">
<table id="bodyTable" style="height:100%; width:100%; padding:0; margin:0;">
<tr height="30"><td colspan="2">

<!-- tool bar goes here -->
<table id="toolbarTable" style="padding:0; margin:0;" cellspacing="5">
<tr style="padding:0; margin:0;">
	
	<td class="standardToolbar" valign="top"> 
	
		<!-- Permanent set of tools -->
		<input type="button" onClick="showSidebar('editImageToolbar');" value="Edit Image" style="margin: 0 5px;">
		<input type="button" id="xybtn" value="X-Y" onClick="setAxes('XY');" style="margin: 0 5px;">
		<input type="button" id="polarbtn" value="Polar" onClick="setAxes('polar')" style="margin: 0 5px;">
		<input type="button" id="ternarybtn" value="Ternary" onClick="setAxes('ternary');" style="margin: 0 5px;">
		<input type="button" onClick="acquireData();" value="Acquire Data" style="margin: 0 5px;">
		<input type="button" onClick="showPopup('aboutNote');" value="About" style="margin: 0 5px;">
		
	</td>
	<td class="standardToolbar" valign="top">
		
		<div style="position:relative;">
		
		<!-- Extra toolbars go here -->
		
		<div id="paintToolbar" class="toolbar" style="width:350px;">
		<p> Stroke Width <input type="range" id="paintThickness" min="1" max="150" value="20" style="width:200px;"></p>
		</div>
		
		<div id="colorPickerToolbar" class="toolbar" style="width:500px;">
		<p align="right"><span id="colorBox" style="height:15px; border: thin black solid; background: blue;">&nbsp;&nbsp;&nbsp;</span><input type="radio" value="fg_chosen" id="fgChosenRadio" name="colorChooser"> FG <input type="radio" id="bgChosenRadio" value="bg_chosen" name="colorChooser"> BG <input type="button" value="Color Picker" onClick="showPopup('colorPicker');"><input type="button" value="RGB"> Threshold <input type="button" value="Test"></p>
		</div>
		
		</div>
		
	</td>
</tr>
</table>

</td>

</tr>

<tr><td valign="top" id="canvasTD">
<!-- the main canvas goes here -->
	<div id="canvasDiv" style="position:relative;" onMouseOver="this.style.cursor='crosshair';">
		<canvas id="mainCanvas">
		</canvas>
	</div>
</td>

<td valign="top" width="220">
<aside>
	<!-- zoom window goes here -->
	<div style="position:relative;">
		<canvas id="zoomCanvas" width=200 height=200></canvas>
	</div>
	
	<div style="position:relative;">

	<!-- side bars go here -->
	<div id="manualMode" class="sidebar">
	<p align="center"><b>Manual Mode</b></p>
	<p align="center"><input type="button" value="Switch to Auto" onClick="showSidebar('autoMode');" style="width: 150px;" ></p>
	<hr />
	<p align="center"><input type="button" value="Select Points" onClick="pickPoints();" style="width: 150px;"></p>
	<p align="center"><input type="button" value="Undo" onClick="undoPointSelection();" style="width: 75px;"><input id="clearAllBtn" type="button" value="Clear All" onCLick="clearPoints();" style="width: 75px;"></p>
	<p align="center"><input type="button" value="Delete Point" onClick="deleteSpecificPoint();" style="width:150px;"></p>
	<p align="center"><input type="button" value="Create .CSV" id="saveBtn" onClick="saveData();" style="width:150px;"></p>
	<p align="center">Points Picked:<span id="pointsStatus">0</span></p>
	</div>

	<div id="autoMode" class="sidebar">
	<p align="center"><b>Autodetect Mode</b></p>
	<p align="center"><input type="button" value="Switch to Manual" onClick="showSidebar('manualMode');" style="width: 150px;" ></p>
	<hr />
	<p align="center"><input type="button" id="autoFGBtn" value="FG" style="width:75px;" onClick="pickColor('fg');"><input type="button" id="autoBGBtn" value="BG" style="width:75px;" onClick="pickColor('bg');"></p>
	<p align="center"><input type="button" value="Box" style="width:50px;" onClick="boxPaint();"><input type="button" value="Pen" style="width:50px;" onClick="penPaint();"><input type="button" value="Erase" style="width:50px;" onClick="eraser();"></p>
	<p align="center"><input type="button" value="Settings" style="width: 75px;" onClick="showPopup('autoSettings');"><input type="button" value="SCAN!" style="width: 75px;" ></p>
	<hr />
	<p align="center"><input id="removeLastBtn" type="button" value="Delete" onClick="deleteSpecificPoint();" style="width: 75px;"><input id="clearAllBtn" type="button" value="Clear All" onCLick="clearPoints();" style="width: 75px;"></p>
	<p align="center"><input type="button" value="Create .CSV" id="saveBtn" onClick="saveData();" style="width:150px;"></p>
	<p align="center">Points Picked:<span id="pointsStatus">0</span></p>
	</div>

	<div id="editImageToolbar" class="sidebar">
	<p align="center"><b>Edit Image</b></p>
	<p align="center"><input type="button" value="H. Flip" style="width: 75px;" onClick="hflip();"><input type="button" value="V. Flip" style="width: 75px;" onClick="vflip();"></p>
	<p align="center"><input type="button" value="Crop" style="width: 150px;" onClick="cropPlot();"></p>
	<!--<p align="center"><input type="text" value="90.0" style="width: 75px;"><input type="button" value="Rotate" style="width: 75px;" onClick="showPopup('na');"></p> -->
	<p align="center"><input type="button" value="Restore" style="width: 150px;" onClick="restoreOriginalImage();"></p>
	</div>

	</div>
</aside>
</td></tr>
</table>

<!-- popup windows go here -->

	<div id="shadow" style="width:100%; height:100%; background-color: rgba(0,0,0,0.3); position:absolute; top:0px; left:0px; z-index:50; visibility:hidden;">
	</div>

	<div id="xyRangeForm" class="popup" style="width: 200px;">
	<p align="center"><b>X Range</b> <!-- <input type="checkbox" id="xlog"> Log Scale --></p>
	<p align="center">Min: <input type="text" size="6" id="xmin" value="0"></p>
	<p align="center">Max: <input type="text" size="6" id="xmax" value="1"></p>
	<p align="center"><b>Y Range</b> <!-- <input type="checkbox" id="ylog"> Log Scale --></p>
	<p align="center">Min: <input type="text" size="6" id="ymin" value="0"></p>
	<p align="center">Max: <input type="text" size="6" id="ymax" value="1"></p>
	<p align="center"><input type="button" id="xybtn" value="OK" onClick="setXYRange();"></p>
	</div>

	<div id="csvWindow" class="popup" style="width: 500px; height: 300px;">
	<p align="center"><b>Acquired Data</b></p>
	<p align="center">Copy and Paste to a .CSV file</p>
	<p align="center"><textarea id="tarea" rows="10" cols="50"></textarea></p>
	<p align="center"><input type="button" value="Copy to Clipboard" onClick="closePopup('csvWindow');"> <input type="button" id="closeCSVbtn" value="Done" onClick="closePopup('csvWindow');"></p>
	</div>

	<div id="xyAxesInfo" class="popup" style="width: 350px;"> 
	<p align="center"><b>Align X-Y Axes</b></p>
	<p align="center"><img src="images/xyaxes.png" /></p>
	<p align="center">Select four corners of the axes starting with the origin and going clockwise.</p>
	<p align="center"><input type="button" value="Proceed" onClick="closePopup('xyAxesInfo')"></p>
	</div>

	<div id="polarAxesInfo" class="popup" style="width: 350px;">
	<p align="center"><b>Align Polar Axes</b></p>
	<p align="center"<img src="images/polaraxes.png" /></p>
	<p align="center">Select four points as shown to align the axes.</p>
	<p align="center"><input type="button" value="Proceed" onClick="closePopup('polarAxesInfo')"></p>
	</div>

	<div id="ternaryAxesInfo" class="popup" style="width: 350px;">
	<p align="center"><b>Align Ternary Axes</b></p>
	<p align="center"<img src="images/ternaryaxes.png" /></p>
	<p align="center">Select four points as shown to align the axes.</p>
	<p align="center"><input type="button" value="Proceed" onClick="closePopup('ternaryAxesInfo')"></p>
	</div>

	<div id="autoSetRange" class="popup" style="width: 350px;">
	Specify Xmin, Xmax, dX or Number of points overall.
	</div>
	
	<div id="colorPicker" class="popup" style="width:400px;">
	<p align="center"><b>Specify RGB Values</b></p>
	<p align="center">&nbsp;</p>
	<p align="center">Red <input type="text" value="255" size="3"> Green <input type="text" value="255" size="3"> Blue <input type="text" value="255" size="3"></p>
	<p align="center">&nbsp;</p>
	<p align="center"><input type="button" value="Save" onClick="closePopup('colorPicker');"></p>
	</div>

	<div id="alignAxes" class="popup" style="width:300px;">
	<p align="center"><b>Acquire Data</b></p>
	<p align="center">&nbsp;</p>
	<p align="center">Please align the axes before acquiring data.</p>
	<p align="center">&nbsp;</p>
	<p align="center"><input type="button" value="Ok" onClick="closePopup('alignAxes');"></p>
	</div>

	<div id="aboutNote" class="popup" style="width: 550px;">
	<p align="center"><b>WebPlotDigitizer v2.0</b> - Web based Plot Digitizer</p>
	<p>&nbsp;</p>
	<p align="center">This program is distributed under the GNU General Public License Version 3.</p>
	<p align="center">Copyright 2010 Ankit Rohatgi &lt;ankitrohatgi@hotmail.com&gt;</p>
	<p align="center"><a href="http://www.arohatgi.info/WebPlotDigitizer" target="website">http://www.arohatgi.info/WebPlotDigitizer</a></p>
	<p>&nbsp;</p>
	<p align="center"><input type="button" value="Close" onClick="closePopup('aboutNote');"></p>
	</div>

	<div id="autoSettings" class="popup">
	<p align="center"><b>Autodetection Settings</b></p>
	<table>
	<tr><td><p align="center">Minimum X <input type="text" size="6" id="autoXmin"></p></td><td><p align="center">Maximum X <input type="text" size="6" id="autoXmax"></p></td></tr>
	<tr>
		<td><p align="center"><input type="radio" name="numberChoice" value="fixedN"> Fixed number of points</p></td>
		<td><p align="center"><input type="radio" name="numberChoice" value="fixedN"> Fixed step size</p></td>
	</tr>
	<tr><td colspan="2"><p align="center">Specify number of points or step size <input type="text" value="10" size="5"></p></td></tr>
	</table>
	<p align="center"><input type="button" value="Test Settings"> <input type="button" value="Save" onClick="closePopup('autoSettings');"></p>
	</div>

	<div id="testImageWindow" class="popup">
	<p align="center"><b>Test Window</b></p>
	<p align="center"><img src="" /><p>
	<p align="center"><input type="button" value="Close" onClick="closePopup('testImageWindow');"></p>
	</div>

	<div id="na" class="popup" style="width:500px;">
	<p align="center"><b>This feature is not yet available!</b></p>
	<p align="center">Sorry, this has yet to be implemented. This might be fixed in future versions.</p>
	<p align="center"><input type="button" value="Close" onClick="closePopup('na');"></p>
	</div>

	<div id="wait" style="position:absolute; top:0px; right: 30px; border: thin white solid; background: black; color: white; width:200px; margin: 0px 0px; padding: 0px 0px; -moz-border-radius: 20px; visibility:hidden;">
	<p align="center" style="padding:0px 0px; margin: 0px 0px;"><b>Processing...</b></p>
	</div>

</body>
</html>
